if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-bt-overlay/gallery-bt-overlay.js']) {
   __coverage__['build/gallery-bt-overlay/gallery-bt-overlay.js'] = {"path":"build/gallery-bt-overlay/gallery-bt-overlay.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":30},"end":{"line":1,"column":49}}},"2":{"name":"(anonymous_2)","line":45,"loc":{"start":{"line":45,"column":21},"end":{"line":45,"column":36}}},"3":{"name":"(anonymous_3)","line":70,"loc":{"start":{"line":70,"column":20},"end":{"line":70,"column":32}}},"4":{"name":"(anonymous_4)","line":75,"loc":{"start":{"line":75,"column":18},"end":{"line":75,"column":30}}},"5":{"name":"(anonymous_5)","line":87,"loc":{"start":{"line":87,"column":18},"end":{"line":87,"column":35}}},"6":{"name":"(anonymous_6)","line":107,"loc":{"start":{"line":107,"column":25},"end":{"line":107,"column":37}}},"7":{"name":"(anonymous_7)","line":120,"loc":{"start":{"line":120,"column":29},"end":{"line":120,"column":42}}},"8":{"name":"(anonymous_8)","line":137,"loc":{"start":{"line":137,"column":29},"end":{"line":137,"column":42}}},"9":{"name":"(anonymous_9)","line":153,"loc":{"start":{"line":153,"column":22},"end":{"line":153,"column":38}}},"10":{"name":"(anonymous_10)","line":167,"loc":{"start":{"line":167,"column":23},"end":{"line":167,"column":56}}},"11":{"name":"(anonymous_11)","line":170,"loc":{"start":{"line":170,"column":29},"end":{"line":170,"column":41}}},"12":{"name":"(anonymous_12)","line":174,"loc":{"start":{"line":174,"column":20},"end":{"line":174,"column":32}}},"13":{"name":"(anonymous_13)","line":188,"loc":{"start":{"line":188,"column":23},"end":{"line":188,"column":35}}},"14":{"name":"(anonymous_14)","line":207,"loc":{"start":{"line":207,"column":23},"end":{"line":207,"column":39}}},"15":{"name":"(anonymous_15)","line":225,"loc":{"start":{"line":225,"column":21},"end":{"line":225,"column":34}}},"16":{"name":"(anonymous_16)","line":267,"loc":{"start":{"line":267,"column":27},"end":{"line":267,"column":40}}},"17":{"name":"(anonymous_17)","line":270,"loc":{"start":{"line":270,"column":24},"end":{"line":270,"column":37}}},"18":{"name":"(anonymous_18)","line":290,"loc":{"start":{"line":290,"column":24},"end":{"line":290,"column":37}}},"19":{"name":"(anonymous_19)","line":323,"loc":{"start":{"line":323,"column":24},"end":{"line":323,"column":37}}},"20":{"name":"(anonymous_20)","line":341,"loc":{"start":{"line":341,"column":22},"end":{"line":341,"column":41}}},"21":{"name":"(anonymous_21)","line":345,"loc":{"start":{"line":345,"column":21},"end":{"line":345,"column":40}}},"22":{"name":"(anonymous_22)","line":352,"loc":{"start":{"line":352,"column":22},"end":{"line":352,"column":41}}},"23":{"name":"(anonymous_23)","line":364,"loc":{"start":{"line":364,"column":22},"end":{"line":364,"column":34}}},"24":{"name":"(anonymous_24)","line":375,"loc":{"start":{"line":375,"column":20},"end":{"line":375,"column":32}}},"25":{"name":"(anonymous_25)","line":383,"loc":{"start":{"line":383,"column":47},"end":{"line":383,"column":59}}},"26":{"name":"(anonymous_26)","line":388,"loc":{"start":{"line":388,"column":28},"end":{"line":388,"column":41}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":393,"column":89}},"2":{"start":{"line":9,"column":0},"end":{"line":378,"column":7}},"3":{"start":{"line":46,"column":12},"end":{"line":46,"column":61}},"4":{"start":{"line":48,"column":12},"end":{"line":48,"column":33}},"5":{"start":{"line":50,"column":12},"end":{"line":52,"column":13}},"6":{"start":{"line":51,"column":16},"end":{"line":51,"column":40}},"7":{"start":{"line":54,"column":12},"end":{"line":54,"column":94}},"8":{"start":{"line":63,"column":12},"end":{"line":67,"column":15}},"9":{"start":{"line":71,"column":12},"end":{"line":71,"column":44}},"10":{"start":{"line":72,"column":12},"end":{"line":72,"column":42}},"11":{"start":{"line":76,"column":12},"end":{"line":76,"column":26}},"12":{"start":{"line":77,"column":12},"end":{"line":77,"column":39}},"13":{"start":{"line":78,"column":12},"end":{"line":78,"column":39}},"14":{"start":{"line":88,"column":12},"end":{"line":90,"column":13}},"15":{"start":{"line":89,"column":16},"end":{"line":89,"column":23}},"16":{"start":{"line":93,"column":12},"end":{"line":95,"column":13}},"17":{"start":{"line":94,"column":16},"end":{"line":94,"column":23}},"18":{"start":{"line":97,"column":12},"end":{"line":97,"column":35}},"19":{"start":{"line":98,"column":12},"end":{"line":98,"column":39}},"20":{"start":{"line":108,"column":12},"end":{"line":111,"column":13}},"21":{"start":{"line":109,"column":16},"end":{"line":109,"column":86}},"22":{"start":{"line":110,"column":16},"end":{"line":110,"column":88}},"23":{"start":{"line":121,"column":12},"end":{"line":124,"column":58}},"24":{"start":{"line":126,"column":12},"end":{"line":128,"column":13}},"25":{"start":{"line":127,"column":16},"end":{"line":127,"column":45}},"26":{"start":{"line":138,"column":12},"end":{"line":139,"column":58}},"27":{"start":{"line":141,"column":12},"end":{"line":143,"column":13}},"28":{"start":{"line":142,"column":16},"end":{"line":142,"column":45}},"29":{"start":{"line":154,"column":12},"end":{"line":154,"column":62}},"30":{"start":{"line":168,"column":12},"end":{"line":168,"column":28}},"31":{"start":{"line":170,"column":12},"end":{"line":179,"column":15}},"32":{"start":{"line":171,"column":16},"end":{"line":178,"column":19}},"33":{"start":{"line":175,"column":20},"end":{"line":177,"column":21}},"34":{"start":{"line":176,"column":24},"end":{"line":176,"column":41}},"35":{"start":{"line":189,"column":12},"end":{"line":190,"column":40}},"36":{"start":{"line":192,"column":12},"end":{"line":194,"column":13}},"37":{"start":{"line":193,"column":16},"end":{"line":193,"column":40}},"38":{"start":{"line":196,"column":12},"end":{"line":198,"column":13}},"39":{"start":{"line":197,"column":16},"end":{"line":197,"column":31}},"40":{"start":{"line":208,"column":12},"end":{"line":211,"column":55}},"41":{"start":{"line":213,"column":12},"end":{"line":216,"column":14}},"42":{"start":{"line":226,"column":12},"end":{"line":229,"column":47}},"43":{"start":{"line":231,"column":12},"end":{"line":237,"column":13}},"44":{"start":{"line":232,"column":16},"end":{"line":232,"column":59}},"45":{"start":{"line":233,"column":16},"end":{"line":233,"column":31}},"46":{"start":{"line":235,"column":16},"end":{"line":235,"column":58}},"47":{"start":{"line":236,"column":16},"end":{"line":236,"column":36}},"48":{"start":{"line":239,"column":12},"end":{"line":239,"column":83}},"49":{"start":{"line":268,"column":20},"end":{"line":268,"column":55}},"50":{"start":{"line":271,"column":20},"end":{"line":273,"column":21}},"51":{"start":{"line":272,"column":24},"end":{"line":272,"column":33}},"52":{"start":{"line":274,"column":20},"end":{"line":274,"column":60}},"53":{"start":{"line":276,"column":20},"end":{"line":276,"column":29}},"54":{"start":{"line":291,"column":20},"end":{"line":293,"column":21}},"55":{"start":{"line":292,"column":24},"end":{"line":292,"column":45}},"56":{"start":{"line":295,"column":20},"end":{"line":295,"column":29}},"57":{"start":{"line":324,"column":20},"end":{"line":326,"column":21}},"58":{"start":{"line":325,"column":24},"end":{"line":325,"column":40}},"59":{"start":{"line":327,"column":20},"end":{"line":327,"column":29}},"60":{"start":{"line":342,"column":16},"end":{"line":342,"column":52}},"61":{"start":{"line":346,"column":16},"end":{"line":349,"column":17}},"62":{"start":{"line":347,"column":20},"end":{"line":347,"column":73}},"63":{"start":{"line":353,"column":16},"end":{"line":353,"column":81}},"64":{"start":{"line":365,"column":12},"end":{"line":365,"column":29}},"65":{"start":{"line":376,"column":12},"end":{"line":376,"column":27}},"66":{"start":{"line":380,"column":0},"end":{"line":380,"column":27}},"67":{"start":{"line":383,"column":0},"end":{"line":385,"column":3}},"68":{"start":{"line":384,"column":4},"end":{"line":384,"column":19}},"69":{"start":{"line":388,"column":0},"end":{"line":390,"column":3}},"70":{"start":{"line":389,"column":4},"end":{"line":389,"column":23}}},"branchMap":{"1":{"line":10,"type":"binary-expr","locations":[{"start":{"line":10,"column":11},"end":{"line":10,"column":36}},{"start":{"line":10,"column":40},"end":{"line":10,"column":110}}]},"2":{"line":16,"type":"cond-expr","locations":[{"start":{"line":16,"column":28},"end":{"line":16,"column":32}},{"start":{"line":16,"column":35},"end":{"line":16,"column":48}}]},"3":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":12},"end":{"line":50,"column":12}},{"start":{"line":50,"column":12},"end":{"line":50,"column":12}}]},"4":{"line":54,"type":"cond-expr","locations":[{"start":{"line":54,"column":80},"end":{"line":54,"column":85}},{"start":{"line":54,"column":88},"end":{"line":54,"column":92}}]},"5":{"line":54,"type":"cond-expr","locations":[{"start":{"line":54,"column":36},"end":{"line":54,"column":53}},{"start":{"line":54,"column":56},"end":{"line":54,"column":76}}]},"6":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":12},"end":{"line":88,"column":12}},{"start":{"line":88,"column":12},"end":{"line":88,"column":12}}]},"7":{"line":88,"type":"binary-expr","locations":[{"start":{"line":88,"column":16},"end":{"line":88,"column":36}},{"start":{"line":88,"column":40},"end":{"line":88,"column":46}}]},"8":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":12},"end":{"line":93,"column":12}},{"start":{"line":93,"column":12},"end":{"line":93,"column":12}}]},"9":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":16},"end":{"line":93,"column":22}},{"start":{"line":93,"column":26},"end":{"line":93,"column":83}},{"start":{"line":93,"column":87},"end":{"line":93,"column":146}}]},"10":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12}},{"start":{"line":108,"column":12},"end":{"line":108,"column":12}}]},"11":{"line":121,"type":"cond-expr","locations":[{"start":{"line":121,"column":57},"end":{"line":121,"column":66}},{"start":{"line":121,"column":69},"end":{"line":121,"column":88}}]},"12":{"line":121,"type":"binary-expr","locations":[{"start":{"line":121,"column":23},"end":{"line":121,"column":24}},{"start":{"line":121,"column":28},"end":{"line":121,"column":53}}]},"13":{"line":122,"type":"cond-expr","locations":[{"start":{"line":122,"column":45},"end":{"line":122,"column":49}},{"start":{"line":122,"column":52},"end":{"line":122,"column":57}}]},"14":{"line":122,"type":"binary-expr","locations":[{"start":{"line":122,"column":27},"end":{"line":122,"column":28}},{"start":{"line":122,"column":32},"end":{"line":122,"column":41}}]},"15":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":24},"end":{"line":123,"column":27}},{"start":{"line":123,"column":31},"end":{"line":123,"column":39}}]},"16":{"line":124,"type":"cond-expr","locations":[{"start":{"line":124,"column":29},"end":{"line":124,"column":53}},{"start":{"line":124,"column":56},"end":{"line":124,"column":57}}]},"17":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":12},"end":{"line":126,"column":12}},{"start":{"line":126,"column":12},"end":{"line":126,"column":12}}]},"18":{"line":138,"type":"cond-expr","locations":[{"start":{"line":138,"column":57},"end":{"line":138,"column":66}},{"start":{"line":138,"column":69},"end":{"line":138,"column":88}}]},"19":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":23},"end":{"line":138,"column":24}},{"start":{"line":138,"column":28},"end":{"line":138,"column":53}}]},"20":{"line":139,"type":"cond-expr","locations":[{"start":{"line":139,"column":28},"end":{"line":139,"column":29}},{"start":{"line":139,"column":32},"end":{"line":139,"column":57}}]},"21":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":12},"end":{"line":141,"column":12}},{"start":{"line":141,"column":12},"end":{"line":141,"column":12}}]},"22":{"line":154,"type":"cond-expr","locations":[{"start":{"line":154,"column":44},"end":{"line":154,"column":51}},{"start":{"line":154,"column":54},"end":{"line":154,"column":60}}]},"23":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":20},"end":{"line":175,"column":20}},{"start":{"line":175,"column":20},"end":{"line":175,"column":20}}]},"24":{"line":192,"type":"if","locations":[{"start":{"line":192,"column":12},"end":{"line":192,"column":12}},{"start":{"line":192,"column":12},"end":{"line":192,"column":12}}]},"25":{"line":196,"type":"if","locations":[{"start":{"line":196,"column":12},"end":{"line":196,"column":12}},{"start":{"line":196,"column":12},"end":{"line":196,"column":12}}]},"26":{"line":208,"type":"cond-expr","locations":[{"start":{"line":208,"column":33},"end":{"line":208,"column":34}},{"start":{"line":208,"column":37},"end":{"line":208,"column":38}}]},"27":{"line":215,"type":"cond-expr","locations":[{"start":{"line":215,"column":119},"end":{"line":215,"column":120}},{"start":{"line":215,"column":123},"end":{"line":215,"column":150}}]},"28":{"line":227,"type":"binary-expr","locations":[{"start":{"line":227,"column":28},"end":{"line":227,"column":32}},{"start":{"line":227,"column":36},"end":{"line":227,"column":49}},{"start":{"line":227,"column":53},"end":{"line":227,"column":75}}]},"29":{"line":231,"type":"if","locations":[{"start":{"line":231,"column":12},"end":{"line":231,"column":12}},{"start":{"line":231,"column":12},"end":{"line":231,"column":12}}]},"30":{"line":268,"type":"cond-expr","locations":[{"start":{"line":268,"column":42},"end":{"line":268,"column":46}},{"start":{"line":268,"column":49},"end":{"line":268,"column":54}}]},"31":{"line":271,"type":"if","locations":[{"start":{"line":271,"column":20},"end":{"line":271,"column":20}},{"start":{"line":271,"column":20},"end":{"line":271,"column":20}}]},"32":{"line":291,"type":"if","locations":[{"start":{"line":291,"column":20},"end":{"line":291,"column":20}},{"start":{"line":291,"column":20},"end":{"line":291,"column":20}}]},"33":{"line":324,"type":"if","locations":[{"start":{"line":324,"column":20},"end":{"line":324,"column":20}},{"start":{"line":324,"column":20},"end":{"line":324,"column":20}}]},"34":{"line":353,"type":"cond-expr","locations":[{"start":{"line":353,"column":68},"end":{"line":353,"column":73}},{"start":{"line":353,"column":76},"end":{"line":353,"column":80}}]},"35":{"line":383,"type":"cond-expr","locations":[{"start":{"line":383,"column":19},"end":{"line":383,"column":35}},{"start":{"line":383,"column":38},"end":{"line":383,"column":45}}]}},"code":["(function () { YUI.add('gallery-bt-overlay', function (Y, NAME) {","","/*jslint nomen: true*/","/**"," * This module provides Overlay Widget which can show/hide with different transitions or directions."," *"," * @module gallery-bt-overlay"," */","var body = Y.one('body'),","    Mask = Y.one('.bt-overlay-mask') || body.appendChild(Y.Node.create('<div class=\"bt-overlay-mask\"></div>')),","    WIDTH_CHANGE = 'widthChange',","    HEIGHT_CHANGE = 'heightChange',","    VISIBLE_CHANGE = 'visibleChange',","","    hasTouch = Y.Bottle.Device.getTouchSupport(),","    scrollBase = hasTouch ? body : Y.one('html'),","","    instances = [],","    current,","","    POSITIONS = {","        top: [0, -1],","        bottom: [0, 1],","        left: [-1, 0],","        right: [1, 0]","    },","","    /**","     * A basic Overlay widget which support three types of animation. Use","     * show and hide function to display Overlay. Only one Overlay will show","     * in the same time.","     *","     * @class Overlay","     * @param [config] {Object} Object literal with initial attribute values","     * @extends Widget","     * @uses WidgetParent","     * @uses WidgetPosition","     * @uses WidgetStack","     * @uses WidgetPositionAlign","     * @uses Bottle.PushPop","     * @constructor","     * @namespace Bottle","     */","    Overlay = Y.Base.create('btoverlay', Y.Widget, [Y.WidgetParent, Y.WidgetPosition, Y.WidgetStack, Y.Bottle.PushPop], {","        initializer: function (cfg) {","            var msk = this.get('contentBox').getData('mask');","","            instances.push(this);","","            if (!cfg.zIndex) {","                this.set('zIndex', 200);","            }","","            this.set('mask', (msk ? (msk === 'false') : this.get('fullPage')) ? false : true);","","            /**","             * internal eventhandlers, keep for destructor","             *","             * @property _bscEventHandlers","             * @type EventHandle","             * @private","             */","            this._bscEventHandlers = new Y.EventHandle([","                this.after(WIDTH_CHANGE, this._updatePositionShow),","                this.after(HEIGHT_CHANGE, this._updatePositionShow),","                this.after(VISIBLE_CHANGE, this._doShowHide)","            ]);","        },","","        destructor: function () {","            this._bscEventHandlers.detach();","            delete this._bscEventHandlers;","        },","","        renderUI: function () {","            this.syncWH();","            this._updatePositionHide();","            this._updatePositionShow();","        },","","        /**","         * Resize the Overlay to adapt the browser width and height.","         *","         * @method olResize","         * @param [force=false] {Boolean} <b>true</b> to forece resize even when Overlay is not visibile.","         */","        olResize: function (force) {","            if (!this.get('visible') && !force) {","                return;","            }","","            //reduce syncUI times","            if (!force && (this.get('width') === Y.Bottle.Device.getBrowserWidth()) && (this.get('height') === Y.Bottle.Device.getBrowserHeight())) {","                return;","            }","","            this._updateFullSize();","            this._updatePositionShow();","        },","","        /**","         * handle child full Height or width","         *","         * @method _updateFullSize","         * @protected","         */","        _updateFullSize: function () {","            if (this.get('fullPage')) {","                this.set('width', Y.Bottle.Device.getBrowserWidth(), {noAlign: true});","                this.set('height', Y.Bottle.Device.getBrowserHeight(), {noAlign: true});","            }","        },","","        /**","         * Update showed Overlay position based on action and showFrom","         *","         * @method _updatePositionShow","         * @protected","         */","        _updatePositionShow: function (E) {","            var vis = (E && (E.visible !== undefined)) ? E.visible : this.get('visible'),","                noAlign = (E && E.noAlign) ? true : false,","                move = (vis && !noAlign),","                pos = move ? this.getShowHideXY(true) : 0;","","            if (move) {","                this.absMove(pos[0], pos[1]);","            }","        },","","        /**","         * move the Overlay to hidden place","         *","         * @method _updatePositionHide","         * @protected","         */","        _updatePositionHide: function (E) {","            var vis = (E && (E.visible !== undefined)) ? E.visible : this.get('visible'),","                pos = vis ? 0 : this.getShowHideXY(false);","","            if (!vis) {","                this.absMove(pos[0], pos[1]);","            }","        },","","        /**","         * Show or hide the mask.","         *","         * @method _displayMask","         * @param show {Boolean} true to display, false to hide.","         * @protected","         */","        _displayMask: function (show) {","            Mask.setStyle('display', show ? 'block' : 'none');","        },","","        /**","         * do transition on a node with top and left css properties","         *","         * @method _doTransition","         * @param node {Node} node to do transition","         * @param left {Number} css left in px","         * @param top {Number} css top in px","         * @param [done] {Function} If provided, call this function when transition done","         * @protected","         */","        _doTransition: function (node, left, top, done) {","            var that = this;","","            Y.later(1, this, function () {","                node.transition(Y.merge(this.get('olTrans'), {","                    left: left + 'px',","                    top: top + 'px'","                }), function () {","                    if (done) {","                        done.apply(that);","                    }","                });","            });","        },","","        /**","         * handle Overlay transition when show or hide","         *","         * @method _doneShowHide","         * @protected","         */","        _doneShowHide: function () {","            var show = this.get('visible'),","                mask = this.get('mask');","","            if (mask) {","                this._displayMask(show);","            }","","            if (!show) {","                this.disable();","            }","        },","","        /**","         * get show position or hide position","         *","         * @method getShowHideXY","         * @return {Array} array of position: [x, y]","         */","        getShowHideXY: function (show) {","            var selfDir = show ? 0 : 1,","                posData = POSITIONS[this.get('showFrom')],","                W = Y.Bottle.Device.getBrowserWidth(),","                H = Y.Bottle.Device.getBrowserHeight();","","            return [","                selfDir * W * posData[0] + Math.floor((W - this.get('width')) / 2),","                selfDir * H * posData[1] + Math.floor((H - this.get('height')) / 2) + (Y.Bottle.get('positionFixed') ? 0 : scrollBase.get('scrollTop'))","            ];","        },","","        /**","         * handle Overlay transition when show or hide","         *","         * @method _doShowHide","         * @protected","         */","        _doShowHide: function (E) {","            var show = E.newVal,","                runthese = (show && this.enable() && this._updateFullSize()),","                finalPos = this.getShowHideXY(show),","                node = this.get('boundingBox');","","            if (show) {","                this._updatePositionHide({visible: false});","                current = this;","            } else {","                this._updatePositionShow({visible: true});","                current = undefined;","            }","","            this._doTransition(node, finalPos[0], finalPos[1], this._doneShowHide);","        }","    }, {","        /**","         * Static property used to define the default attribute configuration.","         *","         * @property ATTRS","         * @protected","         * @type Object","         * @static","         */","        ATTRS: {","            /**","             * The Overlay show direction. Should be one of:","             * <dl>","             *  <dt>top</dt><dd>top</dd>","             *  <dt>left</dt><dd>left</dd>","             *  <dt>right</dt><dd>right</dd>","             *  <dt>bottom</dt><dd>bottom</dd>","             * </dl>","             *","             * @attribute showFrom","             * @type String","             * @default left","             */","            showFrom: {","                value: 'left',","                lazyAdd: false,","                validator: function (V) {","                    return POSITIONS[V] ? true : false;","                },","                setter: function (V) {","                    if (V === this.get('showFrom')) {","                        return V;","                    }","                    this._updatePositionShow({showFrom: V});","","                    return V;","                }","            },","","            /**","             * Boolean indicating if Overlay needs to display mask or not.","             *","             * @attribute mask","             * @type Boolean","             * @default true","             */","            mask: {","                value: true,","                validator: Y.Lang.isBoolean,","                setter: function (V) {","                    if (this.get('visible')) {","                        this._displayMask(V);","                    }","","                    return V;","                }","            },","","            /**","             * Default transition setting for Overlay","             *","             * @attribute olTrans","             * @type Object","             * @default {dutation: 0.5}","             */","            olTrans: {","                value: {","                    duration: 0.5","                }","            },","","            /**","             * Boolean indicating if Overlay needs to adjusting height to match viewport when it shows from top or bottom.","             *","             * @attribute fullPage","             * @type Boolean","             * @default true","             */","            fullPage: {","                value: true,","                validator: Y.Lang.isBoolean,","                lazyAdd: false,","                setter: function (V) {","                    if (V) {","                        this.olResize();","                    }","                    return V;","                }","            }","        },","","        /**","         * Static property used to define the default HTML parsing rules","         *","         * @property HTML_PARSER","         * @protected","         * @static","         * @type Object","         */","        HTML_PARSER: {","            showFrom: function (srcNode) {","                return srcNode.getData('show-from');","            },","","            olTrans: function (srcNode) {","                try {","                    return Y.JSON.parse(srcNode.getData('cfg-ol-trans'));","                } catch (e) {","                }","            },","","            fullPage: function (srcNode) {","                return (srcNode.getData('full-page') === 'false') ? false : true;","            }","        },","","        /**","         * Get all instances of Overlay","         *","         * @method getInstances","         * @static","         * @return {Array} all instances of Overlay","         */","        getInstances: function () {","            return instances;","        },","","        /**","         * Get current visilbe Overlay","         *","         * @method getCurrent","         * @static","         * @return {Object | undefined} current visible Overlay. If no any visible Overlay, return undefined.","         */","        getCurrent: function () {","            return current;","        }","    });","","Y.Bottle.Overlay = Overlay;","","// hide shortcut when click mask","Mask.on(hasTouch ? 'gesturemoveend' : 'click', function () {","    current.hide();","});","","// disable scroll on mask","Mask.on('gesturemovestart', function (E) {","    E.preventDefault();","});","","","}, 'gallery-2012.12.19-21-23', {\"requires\": [\"widget-position\", \"widget-stack\", \"gallery-bt-pushpop\"]});","","}());"]};
}
var __cov_lVOWXy4nDhNc0tMD1BXgmg = __coverage__['build/gallery-bt-overlay/gallery-bt-overlay.js'];
__cov_lVOWXy4nDhNc0tMD1BXgmg.s['1']++;YUI.add('gallery-bt-overlay',function(Y,NAME){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['1']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['2']++;var body=Y.one('body'),Mask=(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['1'][0]++,Y.one('.bt-overlay-mask'))||(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['1'][1]++,body.appendChild(Y.Node.create('<div class="bt-overlay-mask"></div>'))),WIDTH_CHANGE='widthChange',HEIGHT_CHANGE='heightChange',VISIBLE_CHANGE='visibleChange',hasTouch=Y.Bottle.Device.getTouchSupport(),scrollBase=hasTouch?(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['2'][0]++,body):(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['2'][1]++,Y.one('html')),instances=[],current,POSITIONS={top:[0,-1],bottom:[0,1],left:[-1,0],right:[1,0]},Overlay=Y.Base.create('btoverlay',Y.Widget,[Y.WidgetParent,Y.WidgetPosition,Y.WidgetStack,Y.Bottle.PushPop],{initializer:function(cfg){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['2']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['3']++;var msk=this.get('contentBox').getData('mask');__cov_lVOWXy4nDhNc0tMD1BXgmg.s['4']++;instances.push(this);__cov_lVOWXy4nDhNc0tMD1BXgmg.s['5']++;if(!cfg.zIndex){__cov_lVOWXy4nDhNc0tMD1BXgmg.b['3'][0]++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['6']++;this.set('zIndex',200);}else{__cov_lVOWXy4nDhNc0tMD1BXgmg.b['3'][1]++;}__cov_lVOWXy4nDhNc0tMD1BXgmg.s['7']++;this.set('mask',(msk?(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['5'][0]++,msk==='false'):(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['5'][1]++,this.get('fullPage')))?(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['4'][0]++,false):(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['4'][1]++,true));__cov_lVOWXy4nDhNc0tMD1BXgmg.s['8']++;this._bscEventHandlers=new Y.EventHandle([this.after(WIDTH_CHANGE,this._updatePositionShow),this.after(HEIGHT_CHANGE,this._updatePositionShow),this.after(VISIBLE_CHANGE,this._doShowHide)]);},destructor:function(){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['3']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['9']++;this._bscEventHandlers.detach();__cov_lVOWXy4nDhNc0tMD1BXgmg.s['10']++;delete this._bscEventHandlers;},renderUI:function(){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['4']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['11']++;this.syncWH();__cov_lVOWXy4nDhNc0tMD1BXgmg.s['12']++;this._updatePositionHide();__cov_lVOWXy4nDhNc0tMD1BXgmg.s['13']++;this._updatePositionShow();},olResize:function(force){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['5']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['14']++;if((__cov_lVOWXy4nDhNc0tMD1BXgmg.b['7'][0]++,!this.get('visible'))&&(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['7'][1]++,!force)){__cov_lVOWXy4nDhNc0tMD1BXgmg.b['6'][0]++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['15']++;return;}else{__cov_lVOWXy4nDhNc0tMD1BXgmg.b['6'][1]++;}__cov_lVOWXy4nDhNc0tMD1BXgmg.s['16']++;if((__cov_lVOWXy4nDhNc0tMD1BXgmg.b['9'][0]++,!force)&&(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['9'][1]++,this.get('width')===Y.Bottle.Device.getBrowserWidth())&&(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['9'][2]++,this.get('height')===Y.Bottle.Device.getBrowserHeight())){__cov_lVOWXy4nDhNc0tMD1BXgmg.b['8'][0]++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['17']++;return;}else{__cov_lVOWXy4nDhNc0tMD1BXgmg.b['8'][1]++;}__cov_lVOWXy4nDhNc0tMD1BXgmg.s['18']++;this._updateFullSize();__cov_lVOWXy4nDhNc0tMD1BXgmg.s['19']++;this._updatePositionShow();},_updateFullSize:function(){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['6']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['20']++;if(this.get('fullPage')){__cov_lVOWXy4nDhNc0tMD1BXgmg.b['10'][0]++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['21']++;this.set('width',Y.Bottle.Device.getBrowserWidth(),{noAlign:true});__cov_lVOWXy4nDhNc0tMD1BXgmg.s['22']++;this.set('height',Y.Bottle.Device.getBrowserHeight(),{noAlign:true});}else{__cov_lVOWXy4nDhNc0tMD1BXgmg.b['10'][1]++;}},_updatePositionShow:function(E){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['7']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['23']++;var vis=(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['12'][0]++,E)&&(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['12'][1]++,E.visible!==undefined)?(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['11'][0]++,E.visible):(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['11'][1]++,this.get('visible')),noAlign=(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['14'][0]++,E)&&(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['14'][1]++,E.noAlign)?(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['13'][0]++,true):(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['13'][1]++,false),move=(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['15'][0]++,vis)&&(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['15'][1]++,!noAlign),pos=move?(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['16'][0]++,this.getShowHideXY(true)):(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['16'][1]++,0);__cov_lVOWXy4nDhNc0tMD1BXgmg.s['24']++;if(move){__cov_lVOWXy4nDhNc0tMD1BXgmg.b['17'][0]++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['25']++;this.absMove(pos[0],pos[1]);}else{__cov_lVOWXy4nDhNc0tMD1BXgmg.b['17'][1]++;}},_updatePositionHide:function(E){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['8']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['26']++;var vis=(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['19'][0]++,E)&&(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['19'][1]++,E.visible!==undefined)?(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['18'][0]++,E.visible):(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['18'][1]++,this.get('visible')),pos=vis?(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['20'][0]++,0):(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['20'][1]++,this.getShowHideXY(false));__cov_lVOWXy4nDhNc0tMD1BXgmg.s['27']++;if(!vis){__cov_lVOWXy4nDhNc0tMD1BXgmg.b['21'][0]++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['28']++;this.absMove(pos[0],pos[1]);}else{__cov_lVOWXy4nDhNc0tMD1BXgmg.b['21'][1]++;}},_displayMask:function(show){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['9']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['29']++;Mask.setStyle('display',show?(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['22'][0]++,'block'):(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['22'][1]++,'none'));},_doTransition:function(node,left,top,done){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['10']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['30']++;var that=this;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['31']++;Y.later(1,this,function(){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['11']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['32']++;node.transition(Y.merge(this.get('olTrans'),{left:left+'px',top:top+'px'}),function(){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['12']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['33']++;if(done){__cov_lVOWXy4nDhNc0tMD1BXgmg.b['23'][0]++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['34']++;done.apply(that);}else{__cov_lVOWXy4nDhNc0tMD1BXgmg.b['23'][1]++;}});});},_doneShowHide:function(){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['13']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['35']++;var show=this.get('visible'),mask=this.get('mask');__cov_lVOWXy4nDhNc0tMD1BXgmg.s['36']++;if(mask){__cov_lVOWXy4nDhNc0tMD1BXgmg.b['24'][0]++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['37']++;this._displayMask(show);}else{__cov_lVOWXy4nDhNc0tMD1BXgmg.b['24'][1]++;}__cov_lVOWXy4nDhNc0tMD1BXgmg.s['38']++;if(!show){__cov_lVOWXy4nDhNc0tMD1BXgmg.b['25'][0]++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['39']++;this.disable();}else{__cov_lVOWXy4nDhNc0tMD1BXgmg.b['25'][1]++;}},getShowHideXY:function(show){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['14']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['40']++;var selfDir=show?(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['26'][0]++,0):(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['26'][1]++,1),posData=POSITIONS[this.get('showFrom')],W=Y.Bottle.Device.getBrowserWidth(),H=Y.Bottle.Device.getBrowserHeight();__cov_lVOWXy4nDhNc0tMD1BXgmg.s['41']++;return[selfDir*W*posData[0]+Math.floor((W-this.get('width'))/2),selfDir*H*posData[1]+Math.floor((H-this.get('height'))/2)+(Y.Bottle.get('positionFixed')?(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['27'][0]++,0):(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['27'][1]++,scrollBase.get('scrollTop')))];},_doShowHide:function(E){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['15']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['42']++;var show=E.newVal,runthese=(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['28'][0]++,show)&&(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['28'][1]++,this.enable())&&(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['28'][2]++,this._updateFullSize()),finalPos=this.getShowHideXY(show),node=this.get('boundingBox');__cov_lVOWXy4nDhNc0tMD1BXgmg.s['43']++;if(show){__cov_lVOWXy4nDhNc0tMD1BXgmg.b['29'][0]++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['44']++;this._updatePositionHide({visible:false});__cov_lVOWXy4nDhNc0tMD1BXgmg.s['45']++;current=this;}else{__cov_lVOWXy4nDhNc0tMD1BXgmg.b['29'][1]++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['46']++;this._updatePositionShow({visible:true});__cov_lVOWXy4nDhNc0tMD1BXgmg.s['47']++;current=undefined;}__cov_lVOWXy4nDhNc0tMD1BXgmg.s['48']++;this._doTransition(node,finalPos[0],finalPos[1],this._doneShowHide);}},{ATTRS:{showFrom:{value:'left',lazyAdd:false,validator:function(V){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['16']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['49']++;return POSITIONS[V]?(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['30'][0]++,true):(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['30'][1]++,false);},setter:function(V){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['17']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['50']++;if(V===this.get('showFrom')){__cov_lVOWXy4nDhNc0tMD1BXgmg.b['31'][0]++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['51']++;return V;}else{__cov_lVOWXy4nDhNc0tMD1BXgmg.b['31'][1]++;}__cov_lVOWXy4nDhNc0tMD1BXgmg.s['52']++;this._updatePositionShow({showFrom:V});__cov_lVOWXy4nDhNc0tMD1BXgmg.s['53']++;return V;}},mask:{value:true,validator:Y.Lang.isBoolean,setter:function(V){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['18']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['54']++;if(this.get('visible')){__cov_lVOWXy4nDhNc0tMD1BXgmg.b['32'][0]++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['55']++;this._displayMask(V);}else{__cov_lVOWXy4nDhNc0tMD1BXgmg.b['32'][1]++;}__cov_lVOWXy4nDhNc0tMD1BXgmg.s['56']++;return V;}},olTrans:{value:{duration:0.5}},fullPage:{value:true,validator:Y.Lang.isBoolean,lazyAdd:false,setter:function(V){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['19']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['57']++;if(V){__cov_lVOWXy4nDhNc0tMD1BXgmg.b['33'][0]++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['58']++;this.olResize();}else{__cov_lVOWXy4nDhNc0tMD1BXgmg.b['33'][1]++;}__cov_lVOWXy4nDhNc0tMD1BXgmg.s['59']++;return V;}}},HTML_PARSER:{showFrom:function(srcNode){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['20']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['60']++;return srcNode.getData('show-from');},olTrans:function(srcNode){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['21']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['61']++;try{__cov_lVOWXy4nDhNc0tMD1BXgmg.s['62']++;return Y.JSON.parse(srcNode.getData('cfg-ol-trans'));}catch(e){}},fullPage:function(srcNode){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['22']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['63']++;return srcNode.getData('full-page')==='false'?(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['34'][0]++,false):(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['34'][1]++,true);}},getInstances:function(){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['23']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['64']++;return instances;},getCurrent:function(){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['24']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['65']++;return current;}});__cov_lVOWXy4nDhNc0tMD1BXgmg.s['66']++;Y.Bottle.Overlay=Overlay;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['67']++;Mask.on(hasTouch?(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['35'][0]++,'gesturemoveend'):(__cov_lVOWXy4nDhNc0tMD1BXgmg.b['35'][1]++,'click'),function(){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['25']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['68']++;current.hide();});__cov_lVOWXy4nDhNc0tMD1BXgmg.s['69']++;Mask.on('gesturemovestart',function(E){__cov_lVOWXy4nDhNc0tMD1BXgmg.f['26']++;__cov_lVOWXy4nDhNc0tMD1BXgmg.s['70']++;E.preventDefault();});},'gallery-2012.12.19-21-23',{'requires':['widget-position','widget-stack','gallery-bt-pushpop']});
