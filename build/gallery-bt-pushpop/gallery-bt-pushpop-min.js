YUI.add("gallery-bt-pushpop",function(b){var g="renderUI",i="pushpop",c="heightChange",d="widthChange",f="addChild",e={none:"none","with":"with",after:1},h={right:[1,0],left:[-1,0],top:[0,-1],bottom:[0,1],tr:[1,-1],br:[1,1],tl:[-1,-1],bl:[-1,1]},a=function(j){this._bppEventHandlers=new b.EventHandle([b.after(this._renderUIPushPop,this,g),this.before(f,this._beforePPAddChild),this.after(d,this._afterPPWidthChange),this.after(c,this._afterPPHeightChange),this.on("destroy",this._destroyPushPop)]);};a.ATTRS={defaultChildType:{value:b.Bottle.Container},underlay:{value:"none",validator:function(j){return e[j]||b.Lang.isNumber(j);},setter:function(j){return e[j];}},ppTrans:{value:{duration:0.5},lazyAdd:false,validator:b.Lang.isObject,setter:function(j){this._updateTransitions(0,j);return j;}},pushFrom:{value:"right",lazyAdd:false,validator:function(j){return h[j];},setter:function(j){this._updateTransitions(j);return j;}}};a.HTML_PARSER={ppTrans:function(k){try{return b.JSON.parse(k.getData("cfg-pp-trans"));}catch(j){}},pushFrom:function(j){return j.getData("push-from");},underlay:function(j){return j.getData("underlay");}};a.prototype={initializer:function(){var l=this,m=this.get("srcNode"),j=m.get("offsetWidth"),k=m.get("offsetHeight");if(!j){this.set("width",j);}if(!k){this.set("height",k);}this.get("contentBox").all("> [data-role=container]").each(function(n){l.add({srcNode:n});});},_destroyPushPop:function(){this._bppEventHandlers.detach();delete this._bppEventHandlers;},_updateTransitions:function(m,n){var l=m||this.get("pushFrom"),j=n||this.get("ppTrans"),k=h[l];this._PUSHPOP_TRANS=b.merge(j,{left:k[0]*this.get("width")+"px",top:k[1]*this.get("height")+"px"});this._DONE_TRANS=b.merge(j,{left:0,top:0});this._UNDERLAY_TRANS=b.merge(j,{left:-k[0]*this.get("width")+"px",top:-k[1]*this.get("height")+"px"});},_syncOneSide:function(k){var j=this.get(k);this.each(function(l){this.set(k,j);});this._updateTransitions();},_afterPPHeightChange:function(){this._syncOneSide("height");},_afterPPWidthChange:function(){this._syncOneSide("width");},_beforePPAddChild:function(j){if(b.instanceOf(j.child,this.get("defaultChildType"))){this.sync(j.child);}else{j.halt();}},_renderUIPushPop:function(){this.get("boundingBox").addClass(b.Widget.getClassName(i));},sync:function(j){j.set("width",this.get("width"));j.set("height",this.get("height"));return this;},topItem:function(){return this.item(this.size()-1);},topScroll:function(){var j=this.topItem();return j?j.get("scrollView"):undefined;},getChild:function(j){if(b.instanceOf(j,this.get("defaultChildType"))){return j;}if(b.Lang.isNumber(j)){return this.item(j);}},moveChild:function(m,n,k){var j=this.getChild(m),l=this;if(k===true){j.get("boundingBox").setStyles({left:n.left,top:n.top});}else{j.get("boundingBox").transition(n,function(){if(k){k.apply(l);}});}return this;},push:function(l){var j=this.size()-1,k=this.get("underlay");if(k=="with"){this.moveChild(j,this._UNDERLAY_TRANS);}this.add(l);this.moveChild(l,this._PUSHPOP_TRANS,true);if(b.Lang.isNumber(k)){return this.moveChild(j,this._UNDERLAY_TRANS,function(){b.later(k,this,function(){this.moveChild(l,this._DONE_TRANS);});});}else{return this.moveChild(l,this._DONE_TRANS);}},pop:function(j){var k=this.size()-1,m=this.item(k),l=this.get("underlay");if(!m){return this;}if(l!=="none"){this.moveChild(k-1,this._UNDERLAY_TRANS,true);if((l=="with")&&k){this.moveChild(k-1,this._DONE_TRANS);}}return this.moveChild(m,this._PUSHPOP_TRANS,function(){m.remove();if(!j){m.destroy(true);}if(k&&b.Lang.isNumber(l)){b.later(l,this,function(){this.moveChild(k-1,this._DONE_TRANS);});}});}};b.namespace("Bottle").PushPop=a;},"@VERSION@",{requires:["base-build","widget-parent","gallery-bt-container"]});