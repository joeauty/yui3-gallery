YUI.add("gallery-bottle",function(e,t){var n="btInit",r="btReady",i="btNative",s="btFixed",o="btFocus",u=/^<!--([\s\S]+)-->$/,a="btSyncScreen",f=e.all("html, body"),l=e.one("body"),c=e.one(".btRoot")||l.appendChild(e.Node.create('<div class="btRoot"></div>')),h=l.hasClass(n),p=!1,d={hidden:{overflow:"hidden"},scroll:{overflow:"auto",overflowX:"hidden"}},v={nativeScroll:!0,positionFixed:!1},m=function(t){p&&!t&&window.scrollTo(0,1);if(v.nativeScroll)return;l.setStyles({width:e.Bottle.Device.getBrowserWidth(),height:e.Bottle.Device.getBrowserHeight()})},g=function(t){var n=e.Bottle.ShortCut.getCurrent(),r=e.Bottle.Overlay.getCurrent(),i=e.Bottle.Page.getCurrent();i?(m(!0),i.resize()):e.fire(a),n&&n.scResize(t===!0),r&&r.olResize(t===!0)},y=function(e,t,n){n.all(e).each(function(e){new t({srcNode:e,render:!0})})},b=function(t){var u=e.one("[data-role=page]"),b=e.instanceOf(t,e.Node),w=b?t:l,E;p=t===!0;if(h&&!b)return;b||(u&&f.setStyles(d.hidden),l.addClass(n),h=!0),y("[data-role=viewer]",e.Bottle.Viewer,w),y("[data-role=photogrid]",e.Bottle.PhotoGrid,w),y("[data-role=carousel]",e.Bottle.Carousel,w),y("[data-role=slidetab]",e.Bottle.SlideTab,w),y("[data-role=loader]",e.Bottle.Loader,w),u&&!b&&(m(),E=new e.Bottle.Page({srcNode:u,render:!0}),E.resize(),E.get("nativeScroll")?(e.Bottle.Device.getPositionFixedSupport()&&(v.positionFixed=!0,l.addClass(s)),f.setStyles(d.scroll),l.addClass(i),E.item(0).get("scrollView").disable(),e.publish(i,{fireOnce:!0}),e.fire(i),e.publish(a),c.on("gesturemove",function(e){e.preventDefault()},{standAlone:!0,root:c})):(v.nativeScroll=!1,m())),w.all("[data-role=shortcut]").each(function(t){new e.Bottle.ShortCut({srcNode:t,visible:!1,disabled:!0,render:c})}),w.all("[data-role=overlay]").each(function(t){new e.Bottle.Overlay({srcNode:t,visible:!1,disabled:!0,render:c})});if(b)return;e.on(e.UA.mobile==="Apple"?"orientationchange":"resize",g,window),l.delegate("focus",function(){l.addClass(o)},"input, select, textarea"),l.delegate("blur",function(){l.removeClass(o),g(!0)},"input, select, textarea"),l.addClass(r).removeClass("btHideSCO").removeClass("btInPlace").removeClass("btHideAll"),e.publish(r,{fireOnce:!0}),e.fire(r)},w=function(t){var n=t.getHTML();n.match(u)&&(t.setHTML(n.replace(u,"$1")),e.Bottle.init(t))},E=function(e){return v[e]};e.namespace("Bottle").init=b,e.namespace("Bottle").get=E,e.namespace("Bottle").lazyLoad=w},"gallery-2012.12.19-21-23",{skinnable:"true",requires:["gallery-bt-shortcut","gallery-bt-overlay","gallery-bt-photogrid","gallery-bt-slidetab","gallery-bt-carousel","gallery-bt-loader","gallery-bt-viewer"]});
