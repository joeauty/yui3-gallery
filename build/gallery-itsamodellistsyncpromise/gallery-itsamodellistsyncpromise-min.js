YUI.add("gallery-itsamodellistsyncpromise",function(e,t){"use strict";function f(){}var n="error",r="save",i="submit",s="loadappend",o="load",u="destroy",a=function(t){var n;try{n=e.JSON.parse(t)}catch(r){}return n};e.mix(f.prototype,{destroyPromise:function(t){var r=this,i=[];return r.each(function(e){i.push(e.destroyPromise(t))}),e.batch.apply(e,i).then(function(e){var n={options:t,src:"destroy"};return r._destroyEvent||(r._destroyEvent=r.publish(u,{preventable:!1})),r.fire(u,n),e},function(e){var i={options:t,src:"destroy",error:e};return r.fire(n,i),e})},loadPromise:function(t){var r=this,i,u,f;return t=t||{},i=t.append,u=typeof i=="boolean"&&i,f=u?s:o,new e.Promise(function(e,i){r.sync(u?"readappend":"read",t,function(s,o){var l,c={options:t,response:o};s?(c.error=s,c.src=u?"loadappend":"load",r.fire(n,c),i(new Error(s))):(r["_"+f]||(r["_"+f]=r.publish(f,{preventable:!1})),l=c.parsed=a(o),u?r.add(l,t):r.reset(l,t),r.fire(f,c),e(o,t))})})},savePromise:function(t){var i=this,s=[];return i.each(function(e){e.isModified()&&s.push(e.savePromise(t))}),e.batch.apply(e,s).then(function(e){var n={options:t,src:"save"};return i._saveEvent||(i._saveEvent=i.publish(r,{preventable:!1})),i.fire(r,n),e},function(e){var r={options:t,src:"save",error:e};return i.fire(n,r),e})},submitPromise:function(t){var r=this,s=[];return r.each(function(e){s.push(e.submitPromise(t))}),e.batch.apply(e,s).then(function(e){var n={options:t,src:"submit"};return r._submitEvent||(r._submitEvent=r.publish(i,{preventable:!1})),r.fire(i,n),e},function(e){var i={options:t,src:"submit",error:e};return r.fire(n,i),e})}},!0),e.ITSAModellistSyncPromise=f,e.Base.mix(e.ModelList,[f])},"gallery-2013.05.29-23-38",{requires:["yui-base","base-base","base-build","node-base","json-parse","promise","model","model-list","gallery-itsamodelsyncpromise"]});
